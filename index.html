<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Enterprise Dashboard ‚Äì ESG Governance</title>
  <link rel="stylesheet" href="style.css" />
  <!-- ethers.js v5 -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
</head>
<body>
  <header>
    <h1>Enterprise Dashboard</h1>
    <nav>
      <a href="index.html">Enterprise</a> |
      <a href="page2.html">Auditor</a>
    </nav>
  </header>

  <!-- Wallet -->
  <div id="wallet" class="card">
    <button id="connectButton">Connect Wallet</button>
    <button id="disconnectButton">Disconnect</button>
    <p id="walletAddress">Not connected</p>
  </div>

  <!-- ‚ë† IoT Data Instant On-Chain -->
  <section class="card">
    <h2><span class="step-circle">‚ë†</span> IoT Data Instant On-Chain</h2>
    <button id="startFeed">Start Data Feed</button>
    <button id="stopFeed">Stop Data Feed</button>
    <div id="dataFeed" class="console">[No data yet]</div>
  </section>

  <!-- ‚ë° Upload Report -->
  <section class="card">
    <h2><span class="step-circle">‚ë°</span> Upload Report (Enterprise)</h2>
    <button onclick="openModal('uploadModal')">Open Upload Window</button>
  </section>

  <!-- ‚ë¢ Report Status -->
  <section class="card">
    <h2><span class="step-circle">‚ë¢</span> Check Report Status</h2>
    <button onclick="openModal('statusModal')">Open Status Window</button>
  </section>

  <!-- ‚ë£ Token & Finance -->
  <section class="card">
    <h2><span class="step-circle">‚ë£</span> Token Distribution & Green Finance</h2>
    <p id="balanceResult">Balance: 0 GRT</p>
    <p id="impactResult">CO‚ÇÇ Reduction: 0 tons</p>
    <button id="checkBalance">Check Balance</button>
    <button id="resetBalance">Reset Balance</button>

    <div class="finance-status">
      <div class="status-item" id="loanStatus">
        <span class="product">Loan</span>
        <span class="detail">--</span>
        <span class="mark">-</span>
      </div>
      <div class="status-item" id="bondStatus">
        <span class="product">Bond</span>
        <span class="detail">--</span>
        <span class="mark">-</span>
      </div>
      <div class="status-item" id="carbonStatus">
        <span class="product">Carbon Credits</span>
        <span class="detail">--</span>
        <span class="mark">-</span>
      </div>
      <div class="status-item" id="insuranceStatus">
        <span class="product">Insurance</span>
        <span class="detail">--</span>
        <span class="mark">-</span>
      </div>
      <div class="status-item" id="scfStatus">
        <span class="product">Supply Chain Finance</span>
        <span class="detail">--</span>
        <span class="mark">-</span>
      </div>
    </div>
  </section>

  <!-- ‚ë§ Finance Criteria Reference -->
  <section class="card">
    <h2><span class="step-circle">‚ë§</span> Finance Criteria Reference</h2>

    <div class="criteria-block">
      <h3>Loan</h3>
      <ul>
        <li><span class="mark">‚ùå</span> <50 Not eligible</li>
        <li><span class="mark">‚ö°</span> 50‚Äì99 Up to S$1M, -0.1%</li>
        <li><span class="mark">‚úÖ</span> 100‚Äì199 Up to S$2M, -0.2%</li>
        <li><span class="mark">‚úÖ</span> ‚â•200 Up to S$5M, -0.3%</li>
      </ul>
    </div>

    <div class="criteria-block">
      <h3>Bond</h3>
      <ul>
        <li><span class="mark">‚ùå</span> <100 Not eligible</li>
        <li><span class="mark">‚ö°</span> 100‚Äì199 Pilot coupon -0.1%</li>
        <li><span class="mark">‚úÖ</span> ‚â•200 Coupon reduced -0.2%</li>
      </ul>
    </div>

    <div class="criteria-block">
      <h3>Carbon Credits</h3>
      <ul>
        <li><span class="mark">‚ÑπÔ∏è</span> Balance √ó0.2 credits, each ‚âà USD 5</li>
      </ul>
    </div>

    <div class="criteria-block">
      <h3>Insurance</h3>
      <ul>
        <li><span class="mark">‚ùå</span> <100 Not eligible</li>
        <li><span class="mark">‚úÖ</span> 100‚Äì199 Premium discount 5%</li>
        <li><span class="mark">‚úÖ</span> ‚â•200 Premium discount 8%</li>
      </ul>
    </div>

    <div class="criteria-block">
      <h3>Supply Chain Finance</h3>
      <ul>
        <li><span class="mark">‚ùå</span> <50 Not eligible</li>
        <li><span class="mark">‚úÖ</span> 50‚Äì199 Discount rate -0.2%</li>
        <li><span class="mark">‚úÖ</span> ‚â•200 Discount rate -0.3%</li>
      </ul>
    </div>
  </section>

  <!-- Upload Modal -->
  <div id="uploadModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('uploadModal')">&times;</span>
      <h3>Upload Report</h3>
      <input type="file" id="fileInput" />
      <button id="uploadButton">Upload & Register</button>
      <pre id="uploadResult"></pre>
      <button id="copyUploadHash" style="display:none;">üìã Copy Hash</button>
    </div>
  </div>

  <!-- Status Modal -->
  <div id="statusModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('statusModal')">&times;</span>
      <h3>Check Report Status</h3>
      <input type="text" id="statusHash" placeholder="Enter file hash (0x...)" />
      <button id="checkStatus">Check Status</button>
      <pre id="statusResult"></pre>
      <button id="copyStatusHash" style="display:none;">üìã Copy Hash</button>
    </div>
  </div>

  <!-- enterprise logic -->
  <script src="app.js"></script>
</body>
</html>
